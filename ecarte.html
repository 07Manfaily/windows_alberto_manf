import React from 'react';

// Simulation du package react-table-component
// En pratique, vous importeriez : import { Table } from 'react-table-component';
const Table = ({ data, columns, style }) => {
  return (
    <div style={{ overflowX: 'auto', ...style }}>
      <table style={{ width: '100%', border: '1px solid #d1d5db', borderCollapse: 'collapse' }}>
        <thead style={{ backgroundColor: '#f9fafb' }}>
          <tr>
            {columns.map((column, index) => (
              <th
                key={index}
                style={{
                  padding: '12px 16px',
                  textAlign: 'left',
                  fontSize: '14px',
                  fontWeight: '500',
                  color: '#374151',
                  borderBottom: '1px solid #d1d5db'
                }}
              >
                {column.header}
              </th>
            ))}
          </tr>
        </thead>
        <tbody>
          {data.map((row, rowIndex) => (
            <tr 
              key={rowIndex} 
              style={{ backgroundColor: rowIndex % 2 === 0 ? '#ffffff' : '#f9fafb' }}
            >
              {columns.map((column, colIndex) => (
                <td
                  key={colIndex}
                  style={{
                    padding: '12px 16px',
                    fontSize: '14px',
                    color: '#111827',
                    borderBottom: '1px solid #e5e7eb'
                  }}
                >
                  {row[column.accessor]}
                </td>
              ))}
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
};

const ReactTablesComponent = () => {
  // Premier tableau - Donn√©es bas√©es sur la structure "Data"
  const dataColumns = [
    { header: 'Matricule', accessor: 'matricule' },
    { header: 'Nom', accessor: 'nom' },
    { header: 'Pr√©nom', accessor: 'prenom' },
    { header: 'Num√©ro Compte', accessor: 'numero_compte' },
    { header: 'Mode H√©bergement', accessor: 'accommodation_mode' },
    { header: 'Nom H√¥tel', accessor: 'hotel_name' },
    { header: 'Nombre de Nuits', accessor: 'number_of_nights' },
    { header: 'Co√ªt par Nuit', accessor: 'nightly_cost' },
    { header: 'Type Transport', accessor: 'type_transport' },
    { header: 'Co√ªt P√©age', accessor: 'toll_cost' },
    { header: 'Co√ªt Transport A/R', accessor: 'cost_of_round_trip_transport' },
    { header: 'Date Arriv√©e', accessor: 'arrival_date' },
    { header: 'Date Retour', accessor: 'return_date' },
    { header: 'Dur√©e (jours)', accessor: 'duration_in_days' },
    { header: 'Allocation H√©bergement', accessor: 'accommodation_allowance' },
    { header: 'Total H√©bergement', accessor: 'total_accommodation' },
    { header: 'Total H√©bergement + Perdiem', accessor: 'total_accommodation_and_perdiem' },
    { header: 'Distance', accessor: 'distance' },
    { header: 'Allocation Transport', accessor: 'transport_allowance' },
    { header: 'Co√ªt Taxi', accessor: 'cab_cost' },
    { header: 'Total Transport', accessor: 'total_transport' },
    { header: 'Montant Total Remboursement', accessor: 'total_amount_to_be_reimbursed' }
  ];

  const dataTableData = [
    {
      matricule: 'EMP001',
      nom: 'Dupont',
      prenom: 'Jean',
      numero_compte: '123456789',
      accommodation_mode: 'H√¥tel',
      hotel_name: 'H√¥tel Central',
      number_of_nights: 3,
      nightly_cost: 120,
      type_transport: 'Voiture',
      toll_cost: 25,
      cost_of_round_trip_transport: 150,
      arrival_date: '2024-01-15',
      return_date: '2024-01-18',
      duration_in_days: 3,
      accommodation_allowance: 300,
      total_accommodation: 360,
      total_accommodation_and_perdiem: 450,
      distance: 250,
      transport_allowance: 100,
      cab_cost: 30,
      total_transport: 180,
      total_amount_to_be_reimbursed: 630
    },
    {
      matricule: 'EMP002',
      nom: 'Martin',
      prenom: 'Marie',
      numero_compte: '987654321',
      accommodation_mode: 'H√©bergement priv√©',
      hotel_name: '',
      number_of_nights: 2,
      nightly_cost: 0,
      type_transport: 'Train',
      toll_cost: 0,
      cost_of_round_trip_transport: 180,
      arrival_date: '2024-01-20',
      return_date: '2024-01-22',
      duration_in_days: 2,
      accommodation_allowance: 200,
      total_accommodation: 200,
      total_accommodation_and_perdiem: 280,
      distance: 300,
      transport_allowance: 120,
      cab_cost: 20,
      total_transport: 200,
      total_amount_to_be_reimbursed: 480
    }
  ];

  // Deuxi√®me tableau - Donn√©es bas√©es sur la structure "Piece_comptable"
  const pieceComptableColumns = [
    { header: 'Code AG D√©bit', accessor: 'code_ag_debit' },
    { header: 'Compte de Charges', accessor: 'compte_de_charges' },
    { header: 'Sens au D√©bit', accessor: 'sens_au_debit' },
    { header: 'Montant au D√©bit', accessor: 'montant_au_debit' },
    { header: 'Matricule', accessor: 'matricule' },
    { header: 'Libell√© Compl√©mentaire', accessor: 'libelle_complementaire' },
    { header: 'Code AG Cr√©dit', accessor: 'code_ag_credit' },
    { header: 'Sens au Cr√©dit', accessor: 'sens_au_credit' },
    { header: 'Montant au Cr√©dit', accessor: 'montant_au_credit' },
    { header: 'Fournisseur', accessor: 'fournisseur' },
    { header: 'Compte Contrepartie', accessor: 'compte_contrepartie' }
  ];

  const pieceComptableData = [
    {
      code_ag_debit: 'AG001',
      compte_de_charges: '6251000',
      sens_au_debit: 'D',
      montant_au_debit: 630,
      matricule: 'EMP001',
      libelle_complementaire: 'Frais mission Jean Dupont',
      code_ag_credit: 'AG001',
      sens_au_credit: 'C',
      montant_au_credit: 630,
      fournisseur: 'TRESORERIE',
      compte_contrepartie: '5312000'
    },
    {
      code_ag_debit: 'AG002',
      compte_de_charges: '6251000',
      sens_au_debit: 'D',
      montant_au_debit: 480,
      matricule: 'EMP002',
      libelle_complementaire: 'Frais mission Marie Martin',
      code_ag_credit: 'AG002',
      sens_au_credit: 'C',
      montant_au_credit: 480,
      fournisseur: 'TRESORERIE',
      compte_contrepartie: '5312000'
    }
  ];

  return (
    <div style={{ 
      padding: '24px', 
      backgroundColor: '#f3f4f6', 
      minHeight: '100vh',
      fontFamily: 'Arial, sans-serif'
    }}>
      <h1 style={{ 
        fontSize: '32px', 
        fontWeight: 'bold', 
        color: '#1f2937', 
        textAlign: 'center', 
        marginBottom: '32px' 
      }}>
        Tableaux de Synth√®se
      </h1>

      {/* Premier tableau - Donn√©es */}
      <div style={{ 
        backgroundColor: '#ffffff', 
        borderRadius: '8px', 
        boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)', 
        padding: '24px',
        marginBottom: '32px'
      }}>
        <h2 style={{ 
          fontSize: '24px', 
          fontWeight: '600', 
          color: '#374151', 
          marginBottom: '16px',
          borderBottom: '2px solid #e5e7eb',
          paddingBottom: '8px'
        }}>
          üìä Tableau de Donn√©es - Frais de Mission
        </h2>
        <div style={{ 
          marginBottom: '16px', 
          fontSize: '14px', 
          color: '#6b7280' 
        }}>
          Ce tableau pr√©sente le d√©tail des frais de mission pour chaque employ√©
        </div>
        <Table 
          data={dataTableData} 
          columns={dataColumns}
          style={{ boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)' }}
        />
      </div>

      {/* Deuxi√®me tableau - Pi√®ce comptable */}
      <div style={{ 
        backgroundColor: '#ffffff', 
        borderRadius: '8px', 
        boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)', 
        padding: '24px',
        marginBottom: '32px'
      }}>
        <h2 style={{ 
          fontSize: '24px', 
          fontWeight: '600', 
          color: '#374151', 
          marginBottom: '16px',
          borderBottom: '2px solid #e5e7eb',
          paddingBottom: '8px'
        }}>
          üí∞ Tableau Pi√®ce Comptable
        </h2>
        <div style={{ 
          marginBottom: '16px', 
          fontSize: '14px', 
          color: '#6b7280' 
        }}>
          Ce tableau pr√©sente les √©critures comptables correspondant aux remboursements
        </div>
        <Table 
          data={pieceComptableData} 
          columns={pieceComptableColumns}
          style={{ boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)' }}
        />
      </div>

      {/* R√©sum√© */}
      <div style={{ 
        backgroundColor: '#eff6ff', 
        borderRadius: '8px', 
        padding: '24px',
        borderLeft: '4px solid #3b82f6'
      }}>
        <h3 style={{ 
          fontSize: '18px', 
          fontWeight: '600', 
          color: '#1e40af', 
          marginBottom: '8px' 
        }}>
          üìã R√©sum√©
        </h3>
        <div style={{ 
          display: 'grid', 
          gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', 
          gap: '16px', 
          fontSize: '14px' 
        }}>
          <div style={{ 
            backgroundColor: '#ffffff', 
            padding: '12px', 
            borderRadius: '6px', 
            boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)' 
          }}>
            <div style={{ fontWeight: '500', color: '#374151' }}>Total Employ√©s</div>
            <div style={{ fontSize: '32px', fontWeight: 'bold', color: '#2563eb' }}>
              {dataTableData.length}
            </div>
          </div>
          <div style={{ 
            backgroundColor: '#ffffff', 
            padding: '12px', 
            borderRadius: '6px', 
            boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)' 
          }}>
            <div style={{ fontWeight: '500', color: '#374151' }}>Montant Total</div>
            <div style={{ fontSize: '32px', fontWeight: 'bold', color: '#059669' }}>
              {dataTableData.reduce((sum, item) => sum + item.total_amount_to_be_reimbursed, 0).toLocaleString()} ‚Ç¨
            </div>
          </div>
          <div style={{ 
            backgroundColor: '#ffffff', 
            padding: '12px', 
            borderRadius: '6px', 
            boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)' 
          }}>
            <div style={{ fontWeight: '500', color: '#374151' }}>√âcritures Comptables</div>
            <div style={{ fontSize: '32px', fontWeight: 'bold', color: '#7c3aed' }}>
              {pieceComptableData.length}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default ReactTablesComponent;
